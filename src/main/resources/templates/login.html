<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- css -->
    <link rel="stylesheet" href="/css/login/login.css">
    <link rel="stylesheet" href="/css/login/login-btn.css">
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(".user").focusin(function(){
            $(".inputUserIcon").css("color", "#e74c3c");
        }).focusout(function(){
            $(".inputUserIcon").css("color", "white");
        });

        $(".pass").focusin(function(){
            $(".inputPassIcon").css("color", "#e74c3c");
        }).focusout(function(){
            $(".inputPassIcon").css("color", "white");
        });
    </script>
</head>

<body>
    <main class="main-container">
    <form action="">
        <h2>
            <span class="entypo-login">
                <i class="fa fa-sign-in"></i>
            </span>
            로그인
        </h2>
        <button class="submit">
            <span class="entypo-lock"><i class="fa fa-lock"></i></span>
        </button>
        <span class="entypo-user inputUserIcon">
            <i class="fa fa-user"></i>
        </span>
        <input id="email" type="text" class="user" placeholder="email"/>
        <span class="entypo-key inputPassIcon">
            <i class="fa fa-key"></i>
        </span>
        <input id="password" type="password" class="pass"placeholder="password"/>
    </form>
    <script>
        function login() {
            const username = $("#email").val();
            const password = $("#password").val();

            $.ajax({
                url: "/login",
                type: "POST",
                data: { username, password },
                success: function(token) {
                    localStorage.setItem("jwtToken", token); // JWT를 브라우저에 저장
                    alert("Login successful! Token saved.");
                    window.location.href = "/chat"; // 로그인 후 이동
                },
                error: function() {
                    alert("Login failed");
                }
            });
        }
    </script>

    <!-- oauth2 로그인 -->
    <div class="btn-container">
        <a class="login-btn login-naver" href="/oauth2/authorization/naver">
            <img th:src="@{/images/login/btnG_완성형.png}"/>
        </a>
        <a class="login-btn login-google" href="/oauth2/authorization/google">
            <img th:src="@{/images/login/googleBtn.png}"/>
        </a>
        <a class="login-btn login-kakao" href="/oauth2/authorization/kakao">
            <img th:src="@{/images/login/kakao_login_medium_narrow.png}"/>
        </a>
    </div>

    </main>
</body>

</html>